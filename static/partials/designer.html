<div cg-busy="{promise:generateGuidesPromise,message:'Loading Your Guides',templateUrl:'static/partials/angular-busy.html'}">
<div id="full-page">
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <div class="logo-box">
          <span>CRISPR Library Designer</span>
        </div>
        <div class="search-box form-group"> 
          <div class="input-group">
            <input type="text" class="form-control" id="search-str" placeholder="Search for additional genes or tissues...">
            <div class="input-group-addon"><i class="fa fa-search"></i></div>
          </div>
        </div>
        <div class="guide-count-box">
          <button type="button" class="btn btn-primary" ng-csv="getGuidesCSV()" filename="guides.csv" csv-header="['Seq',  'Start',   'Score', 'Gene', 'Exon']" csv-column-order="['seq', 'start', 'score', 'gene', 'exon']"> Export {{ countSelectedGuides }} guides</button>
        </div>
      </div>
    </div>
  </div>
  <div id="wrapper">
    <div id="sidebar-wrapper">
      <div class="sidebar-wrapper-inner">
        <ul class="sidebar-nav">
          <li ng-repeat="thegene in gene_to_exon" class="sidebar-primary-item-action" ng-class="{ selected_item : thegene == gene }">
            <a href="" ng-click="setGene($index)" class="sidebar-primary-item-action" ng-class="{ selected_item : thegene == gene }">
              <span class="sidebar-primary-item-action">
                <i class="glyphicon glyph-science-atom"></i> {{ thegene.name }}
              </span>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div id="page-content-wrapper">
      <div class="page-content">
        <div class="container-fluid" id='container'>
          <div class="row">
            <div class="col-md-12">
              <svg height="250" id="exon_graph" width="100%" x="20">
                <g id="background_exon_graph">
                  <rect fill="#eee" height="250" width="100%" x="0" y="0"></rect>
                </g>
                <g id="all_exons">
                  <rect class="connector" fill="#000" height="3" stroke="#000" width="100%" x="0" y="100" id="connector_rect"></rect>
              
                  <g drawindividualexon index="{{$index}}" exons-length="{{gene.exons.length}}" exon="exon" ng-repeat="exon in gene.exons">
                  </g>
                </g>
              </svg>
            </div>
          </div>
          <div class="row">
            <div class=".col-md-6 .col-md-offset-3">
              <div class="table-header">
                <span>
                  Step 3) Optional: Customize your guide selection.
                </span>
              </div>
              <table class="table">
                <tr>
                  <th></th>
                  <th>Sequence</th>
                  <th>Start</th>
                  <th>Score</th>
                  <th>Exon</th>
                </tr>
                <tr ng-repeat="guide in all_gRNAs[gene.name] | orderBy:'-score'">
                  <td><input type="checkbox" ng-model="guide.selected" ng-change="guideSelected(guide)"></td>
                  <td>{{ guide.seq }}</td>
                  <td>{{ guide.start }}</td>
                  <td>{{ guide.score.toFixed(2) }}</td>
                  <td>{{ guide.exon }}</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</div>